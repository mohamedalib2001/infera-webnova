# INFERA WebNova - Intelligent OS for Sovereign Digital Platforms

## Overview
INFERA WebNova is a **Core Operating System** designed to act as a "digital platform factory." It autonomously generates and manages sovereign digital platforms without manual rebuilds, utilizing a Blueprint-First approach, Event-Driven Architecture, and Autonomous Governance with AI Orchestration. The system supports multi-tenant isolation and targets diverse sectors (Financial, Healthcare, Government, Education, Enterprise) with a focus on compliance (PCI-DSS, HIPAA, GDPR). Its purpose is to create a robust, self-managing ecosystem for digital platforms.

## Platform Owner Information
*   **Full Name**: MOHAMED ALI ABDALLA MOHAMED
*   **Username**: mohamedalib2001
*   **Title**: Founder & CEO at Infra Engine | Building AI-powered digital platforms & SaaS ecosystems
*   **Email**: mohamed.ali.b2001@gmail.com
*   **Phone (Egypt)**: +201026363528
*   **Phone (Saudi Arabia)**: +966544803384
*   **GitHub**: mohamedalib2001
*   **Company**: Infra Engine
*   **Platform**: INFERA WebNova

## User Preferences
I want iterative development.
Ask before making major changes.
I prefer detailed explanations.
Do not make changes to the folder `Z`.
Do not make changes to the file `Y`.

## INFERA Sovereign Platform Creation Directive (BINDING)

### Supreme Principle
All INFERA platforms are created, managed, and developed according to a superior sovereign model. No traditional solutions, limited systems, or any technical/security compromises are accepted.

### Critical Requirements (Non-Negotiable)

#### 1. No Mockups Policy
- **PROHIBITED**: Creating simulation platforms or non-functional mockups
- **REQUIRED**: Every platform must have a real database and functional registration system
- **REQUIRED**: All functions and features must be fully operational, not just for display
- **ALLOWED**: Test data registration with a reset button to clear it

#### 2. 0-Code Compliance (For Generated Platforms)
- **PROHIBITED**: Manual code writing inside generated platforms
- **PROHIBITED**: Custom scripts, non-sovereign plugins, or solutions outside WebNova
- **ALLOWED**: No-Code / Visual Logic / AI Workflows / Declarative Config / Event Automation

#### 3. 100% Dynamic Architecture
- **REQUIRED**: All components (UI, Workflows, Permissions, Data Models) must be fully dynamic
- **PROHIBITED**: Hardcoded Pages, Static Flows, Fixed Roles, unchangeable elements
- **VIOLATION**: Any deviation from dynamism = serious sovereign violation

#### 4. AI-First Principle
- **REQUIRED**: Every platform contains AI Core, AI Assistant, Predictive Engine, Behavioral Intelligence
- **PROHIBITED**: CRUD-only systems, traditional dashboards, manual operations
- **RULE**: No platform without AI = No acceptable platform

#### 5. Sovereign Security
- **REQUIRED**: Zero-Trust Architecture with End-to-End Encryption
- **REQUIRED**: AI Threat Detection with Continuous Monitoring
- **REQUIRED**: Automated Incident Response
- **GOAL**: Platforms theoretically and practically unhackable

#### 6. Test Data & Reset
- **ALLOWED**: Test/demo data registration for platform testing
- **REQUIRED**: Data reset button to delete test data
- **REQUIRED**: Reset button works once and clears all test data

### Scalability & Infrastructure
- Cloud-Native Architecture with Microservices / Modular Design
- Horizontal & Vertical Scaling with Zero Downtime Expansion
- No Vendor Lock-in

### Technology Standards
- Use latest Frameworks, AI Engines, Databases, Security Models
- Mandatory periodic updates
- Immediate removal of outdated technology

### Global Compliance
- ISO / NIST / SOC2 / GDPR / Zero Trust compliance
- Latest Design Systems with Accessibility & Performance Metrics
- Data Governance & Compliance mandatory

### Deployment Rules
- One-Click Deploy with Versioning, Rollback, Environment Control
- **PROHIBITED**: External deployment or modifications outside WebNova
- Live updates without downtime

### Platform Excellence
- Every platform must surpass: Salesforce, SAP, ServiceNow, Palantir
- Not by imitation but by qualitative transcendence
- Unique features not found in market
- WOW Effect from first use

## System Architecture
INFERA WebNova uses React, TypeScript, and Vite for the frontend; Express.js and Node.js for the backend; and PostgreSQL with Drizzle ORM. Styling is managed by Tailwind CSS and Shadcn UI, with TanStack Query for state management.

**UI/UX Decisions:**
Features include an AI Chat Interface, live preview with responsive controls, dark/light modes, pre-built UI components, bilingual support (Arabic/English), and Visual Git Version Control.

**Core System Architecture:**
*   **AI Orchestrator**: Uses Anthropic Claude for intent analysis, code generation, and platform optimization.
*   **Blueprint System**: Serves as the Single Source of Truth for platform specifications.
*   **Platform Orchestrator**: Manages the workflow from Blueprint creation to deployment and governance.
*   **PostgreSQL Event Store**: Implements durable event sourcing with tenant isolation.
*   **Extension Registry**: Provides scoped contexts for multi-tenant extension isolation.
*   **AI Sovereignty Layer**: A governance framework for owner-only AI control, enforcing rules, resource allocation, and human-in-the-loop decisions with immutable audit logs.
*   **Core Modules**: Include an Event Bus, Core Contracts (Zod schemas), Plugin System, Code Generation Engine, Runtime Layer, Versioning System, and Multi-Tenancy Core.
*   **Design Principles**: Modular, Event-Driven, Contract-First design using JSON Schemas, Plugin Architecture, and Multi-Tenancy.
*   **Service Providers Integration Hub**: Manages 14 built-in external providers across 8 categories (AI, Payment, Communication, Cloud, Analytics, Search, Media, Maps) with secure API key management, performance monitoring, cost tracking, failover, alerts, and audit logging.
*   **Sovereign User Management System**: Provides complete user governance with ROOT_OWNER controls, custom permissions, and audit trails.
*   **Resource Usage & Cost Tracking System**: Tracks user resource consumption with regional pricing and usage limits.
*   **Sovereign Infrastructure Management**: Offers cloud-agnostic infrastructure management via a Provider Abstraction Layer (PAL), supporting Hetzner, AWS, Google Cloud, Azure, and DigitalOcean.
*   **External Integration Gateway**: Securely manages technical partner access (Replit, GitHub Copilot).
*   **AI Smart Suggestions System**: Provides intelligent code analysis and improvement recommendations using Claude AI.
*   **One-Click Deployment System**: Streamlined deployment to Web, Mobile, or Desktop, supporting environment management, custom domains, auto-scaling, SSL/CDN, and deployment history with rollback.
*   **Backend Generator System**: AI-powered full backend code generation supporting multiple frameworks, databases, languages, API styles, and authentication.
*   **AI Copilot Assistant**: An intelligent coding assistant powered by Claude AI.
*   **Testing Generator**: Automatic generation of unit, integration, and E2E tests.
*   **Marketplace**: A platform for community extensions and templates.
*   **Real-time Collaboration**: Features live collaborators, role-based access, code comments, and activity tracking.
*   **Full-Stack Project Generator**: Supports 12 templates (e.g., React+Express, Next.js) generating complete project structures.
*   **Cloud Deployment Adapters**: Provider-agnostic deployment API supporting Vercel, Netlify, Railway, Render, Fly.io, and Hetzner.
*   **Sandbox Code Executor**: Securely executes code in Node.js, TypeScript, Python, PHP, Bash, Go, and Rust with security features like malicious code detection and resource limits.
*   **Secure Terminal System**: Provides a secure terminal with whitelist-based command execution and shell injection protection.
*   **Project Runtime Engine**: Manages project lifecycle with real filesystem operations, dependency installation, and process monitoring.
*   **Platform Linking Unit (INFERA Engine Federation)**: Registry for 30+ INFERA group platforms with hierarchy and sovereignty tiers. WebNova is registered as the ROOT platform.
*   **Security Model**: Implements Role-Based Access Control (ROOT_OWNER, sovereign, owner roles) with real-time database revalidation, session security, field protection, Zod validation, and a certificate hierarchy. Domain visibility and ownership are separated for system and user domains.
*   **Dynamic Page Telemetry System**: Tracks React component mounts, render times, API calls, response times, and aggregates daily performance scores with zero hardcoded values.
*   **Institutional Memory System**: Provides authenticated API endpoints for creating, listing, searching (semantic), updating, deleting, superseding, and linking memories. Features include lightweight semantic embeddings, bilingual support, keyword extraction, and version tracking.
*   **Execution Engine Enhancements**: Supports Docker container isolation for code execution in multiple languages (Node.js, Python, TypeScript, Go, PHP, Rust) with resource limits and network control.
*   **Integration Layer**: Includes Git API for repository management and CI/CD pipeline management.
*   **Infrastructure-as-Code**: Utilizes Terraform for Hetzner Cloud provisioning (network, firewall, nodes, load balancer) and Ansible for k3s cluster setup (UFW, fail2ban, Helm). Kubernetes manifests define deployments with HPA, resource quotas, and ingress with TLS.
*   **Secrets Vault Service**: Provides AES-256-GCM encrypted secret management with versioning, rotation policies, access control, and audit logging via a dedicated API.
*   **Nova Permissions System**: Offers 20+ granular permissions categorized by security levels (high/medium/low/danger) and audit logging.
*   **Service-to-Service Authentication**: HMAC-SHA256 signature validation via custom headers with timestamp windows and constant-time comparisons to prevent replay and timing attacks.

## External Dependencies
*   **Database**: PostgreSQL
*   **ORM**: Drizzle ORM
*   **AI**: Anthropic Claude API
*   **Payment Gateways**: Stripe, PayPal, Tap, mada, Apple Pay, Google Pay, STC Pay, Bank Transfer, Crypto
*   **Communication**: Twilio
*   **Cloud Providers**: AWS, Cloudflare, Hetzner, Google Cloud, Microsoft Azure, DigitalOcean
*   **Analytics**: Google Analytics
*   **Search**: Algolia
*   **Media**: Cloudinary
*   **Maps**: Google Maps
*   **Development Tools**: Replit, GitHub Copilot

## Nova Sovereign Decision Engine (New - December 2025)

### Overview
Nova AI operates as **"Sovereign Decision Governor - Not Just an Assistant"**. The system enforces strict separation between Analysis, Decision, and Execution phases with full decision traceability.

### Core Components
*   **Decision Policy Engine**: Manages sovereign decisions with risk assessment and phase tracking
*   **Decision Traceability**: Full trace of WHY, HOW, WHO, WHEN for every decision
*   **Approval Chains**: Multi-level approval workflows with configurable thresholds
*   **Kill Switch**: Emergency halt capability for any AI operation (owner only)
*   **Human-in-the-Loop**: Matrix for when human intervention is required
*   **Model Lifecycle**: Train → Validate → Approve → Deploy → Pause → Retire
*   **Bias/Drift/Risk Monitoring**: Continuous assessment scores per model
*   **Knowledge Graph**: Semantic relationships between decisions, policies, and outcomes
*   **Policy Memory**: Long-term memory for governance decisions (not chat memory)
*   **Compliance Engine**: ISO 27001, NIST CSF, GDPR, SOC2, Regional Laws support

### API Endpoints
Base path: `/api/nova-sovereign/`
*   **Decisions**: `GET /decisions`, `POST /decisions`, `GET /decisions/:id/trace`
*   **Approvals**: `POST /decisions/:id/approve`, `POST /decisions/:id/reject`
*   **Kill Switch**: `POST /kill-switch/trigger`, `POST /kill-switch/release`
*   **Model Lifecycle**: `GET /model-lifecycle`, `POST /model-lifecycle/:id/transition`
*   **Compliance**: `GET /compliance/frameworks`, `POST /compliance/assessments`
*   **Dashboard**: `GET /dashboard/summary`, `GET /compliance/dashboard`

### Security Model
*   Role hierarchy: ROOT_OWNER > owner > sovereign > admin > user
*   All authority validated against database (no client-supplied IDs trusted)
*   Session-derived identity for all mutation endpoints
*   Database-backed role verification prevents privilege escalation

### Dashboard Route
`/owner/nova-sovereign` - Sovereign dashboard with real-time data

### SECURITY NOTE (Production)
All mutation endpoints require authenticated sessions. In development, endpoints validate user existence in database. For production deployment, ensure session middleware is properly configured with Replit Auth or custom authentication.