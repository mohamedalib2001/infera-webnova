# مواصفات بناء وكيل مهندس برمجيات مستقل (Autonomous Software Engineer Agent)

## 1. النواة (The Core Intelligence)
- **المحرك الرئيسي:** نموذج لغوي كبير (LLM) متقدم (مثل GPT-4o, Claude 3.5 Sonnet, أو Gemini 1.5 Pro) مدرب بشكل مكثف على البرمجة، حل المشكلات، وفهم السياقات المعقدة.
- **نافذة السياق (Context Window):** يجب أن تكون كبيرة (128k+ tokens) لاستيعاب ملفات المشروع المتعددة وتاريخ المحادثة.
- **إعدادات النظام (System Prompting):** تعليمات صارمة تحدد الشخصية (مهندس برمجيات)، القيود (الأمان، عدم تدمير البيانات)، والصلاحيات.

## 2. بيئة العمل (The Environment - Sandboxed)
- **نظام التشغيل:** حاوية لينكس (Linux Container/NixOS) معزولة وآمنة.
- **نظام الملفات:** وصول كامل للقراءة والكتابة (Read/Write) على ملفات المشروع.
- **الطرفية (Shell/Terminal):** قدرة على تنفيذ أوامر Bash وتثبيت الحزم (Packages).
- **الشبكة (Network):** وصول مقيد للإنترنت لجلب المكتبات والبحث، مع منفذ (Port) مفتوح لعرض تطبيقات الويب (مثل Port 5000).

## 3. مجموعة الأدوات (Tooling Interface)
يجب تزويد الوكيل بواجهة برمجية (API) لاستدعاء الأدوات التالية بدلاً من الكتابة المباشرة:
1.  **File System Tools:**
    *   `read_file`: قراءة محتوى الملفات (مع دعم Pagination للملفات الكبيرة).
    *   `write_file`: إنشاء ملفات جديدة.
    *   `edit_file`: تعديل أجزاء محددة من الملف (Search & Replace) بدقة لعدم إتلاف الكود.
    *   `ls/glob`: استكشاف هيكل المجلدات.
2.  **Execution Tools:**
    *   `run_command`: تنفيذ أوامر Shell (مثل `npm install`, `python main.py`) مع إدارة العمليات الخلفية (Background Processes).
3.  **Knowledge Tools:**
    *   `web_search`: البحث في جوجل لجلب أحدث التوثيقات (Documentation).
    *   `code_search`: البحث الدلالي (Semantic Search) داخل قاعدة الكود الكبيرة.
4.  **Inspection Tools:**
    *   `lsp_diagnostics`: الاتصال بـ Language Server (LSP) لاكتشاف أخطاء الـ Syntax والـ Types قبل التشغيل.

## 4. حلقة التحكم (The Control Loop - Agentic Workflow)
لا يعمل الوكيل كـ Chatbot عادي (سؤال وجواب)، بل يعمل في حلقة تكرارية:
1.  **الملاحظة (Observe):** قراءة طلب المستخدم وحالة المشروع الحالية.
2.  **التفكير (Think):** تحليل المشكلة ووضع خطة (Step-by-step Plan).
3.  **الفعل (Act):** استدعاء أداة مناسبة (مثلاً: قراءة ملف).
4.  **النتيجة (Result):** استقبال مخرجات الأداة (مثلاً: محتوى الملف).
5.  **التكرار:** العودة للخطوة 2 حتى اكتمال المهمة.

## 5. إدارة الذاكرة والسياق (Memory & Context Management)
- **ذاكرة قصيرة المدى:** سجل المحادثة الحالي ونتائج الأدوات الأخيرة.
- **ذاكرة طويلة المدى:** ملفات توثيق المشروع (مثل `README.md` أو ملفات `.md` مخفية) لتخزين تفضيلات المستخدم وقرارات التصميم.
- **تصفية السياق:** آلية لتقليل كمية الكود المرسلة للنموذج (مثلاً إرسال ملخصات للملفات غير ذات الصلة) لتوفير التكلفة والسرعة.

## 6. واجهة المستخدم (User Interface)
- واجهة دردشة تفاعلية.
- عرض مرئي للملفات التي يتم تعديلها والطرفية (Terminal) في الوقت الفعلي.
- زر "معاينة" (Preview) لتشغيل التطبيق الناتج في نافذة متصفح مدمجة (Webview).